import React, {Component} from "react";
import {Button, Collapse} from "reactstrap";
import PropTypes from "prop-types";
import Graph from "./Graph";
import LiveGraph from "./LiveGraph";

const showBreath = "Show Live Breath";
const hideBreath = "Hide Live Breath";
const showFullBreath = "Show All Breath";
const hideFullBreath = "Hide All Breath";

class UserListItem extends Component {
	state = {
		isLiveDataOpen: false,
		isFullDataOpen: false,
		liveButtonText: showBreath,
		fullButtonText: showFullBreath

	};

	toggleLiveData = () => {
		let buttonText = hideBreath;

		if (this.state.isLiveDataOpen) {
			buttonText = showBreath;
		}

		this.setState({
			isLiveDataOpen: !this.state.isLiveDataOpen,
			liveButtonText: buttonText
		});
	};

	toggleFullData = () => {
		let buttonText = hideFullBreath;

		if (this.state.isFullDataOpen) {
			buttonText = showFullBreath;
		}

		this.setState({
			isFullDataOpen: !this.state.isFullDataOpen,
			fullButtonText: buttonText
		});
	};

	render() {
		// const userData = [{
		// 	data: [...this.props.user.breath.map((breath) => {
		// 		return [breath.time, breath.value]
		// 	})]
		// }];

		const userData = [{
			data: [[1556442548525, 6.759278769574365], [1556442548546, -1.2821161280852351], [1556442548561, -6.369280292279253], [1556442548575, 0.9982088781160634], [1556442548590, 3.9864416423832747], [1556442548604, 8.354671523812836], [1556442548620, 15.182362713742588], [1556442548633, 15.602165200150857], [1556442548648, 8.054136298065615], [1556442548660, 4.708485248144083], [1556442548673, -4.496871361331912], [1556442548686, -8.639340158827673], [1556442548700, -3.4389844682434205], [1556442548711, 0.6342817637459781], [1556442548726, 10.096881326581954], [1556442548738, 18.38517671508242], [1556442548751, 14.822412202018583], [1556442548763, 18.221274815221015], [1556442548777, 14.381537057030702], [1556442548790, 6.548320972824275], [1556442548806, 6.900343949014985], [1556442548821, 4.927004074490556], [1556442548836, 7.219802424003177], [1556442548850, 10.562735113323008], [1556442548862, 6.828266864301899], [1556442548875, 11.343090479613153], [1556442548890, 20.17843958709238], [1556442548904, 16.410349625659048], [1556442548918, 15.224263591561225], [1556442548931, 11.95806927823974], [1556442548943, 21.183945222097556], [1556442548958, 23.56305156671869], [1556442548972, 14.552865273941151], [1556442548985, 20.15855706473313], [1556442548997, 22.138036576952786], [1556442549010, 20.628292876983533], [1556442549025, 19.022326243820743], [1556442549039, 16.90953572161572], [1556442549054, 23.50722131437159], [1556442549071, 24.886575359038744], [1556442549087, 16.455636724104387], [1556442549101, 9.627020364417117], [1556442549117, 16.36096842348937], [1556442549130, 7.849131907788244], [1556442549144, 3.350655865926246], [1556442549158, 3.079235825291688], [1556442549172, -4.127759838606216], [1556442549188, -10.161826574908776], [1556442549202, -10.819926394454528], [1556442549217, -12.568455380793756], [1556442549233, -8.502625159234087], [1556442549249, -12.407906774040992], [1556442549264, -9.29348150152984], [1556442549278, -1.1538138678278642], [1556442549291, -3.154631871825857], [1556442549304, 1.6646278359851898], [1556442549317, -7.47467286499616], [1556442549333, -3.236762698108132], [1556442549345, -12.32084467726209], [1556442549362, -5.5418648577183], [1556442549375, 0.8053780191995958], [1556442549389, -3.522856136670523], [1556442549402, -0.2591978537380051], [1556442549416, -3.4706958841190465], [1556442549430, 0.9527275975379119], [1556442549444, -5.873668352837671], [1556442549458, 2.0291742022321735], [1556442549471, 10.544001159207482], [1556442549485, 10.678344317873467], [1556442549505, 13.231315259885598], [1556442549518, 7.268466226450258], [1556442549530, 16.692396043592332], [1556442549543, 8.420257686890576], [1556442549557, 13.676676087098524], [1556442549571, 15.289762018223417], [1556442549587, 11.648819900965421], [1556442549603, 19.507206510279847], [1556442549618, 20.778989553051698], [1556442549632, 19.39158010507074], [1556442549645, 19.070839470185884], [1556442549662, 10.253317020742031], [1556442549676, 0.5155854422782191], [1556442549692, 7.6693802608103425], [1556442549706, 15.407942415277589], [1556442549724, 12.08318996869778], [1556442549737, 10.00222983025612], [1556442549751, 18.981731051826095], [1556442549764, 25.437495521781187], [1556442549778, 20.97535885860409], [1556442549794, 25.120842427432365], [1556442549808, 21.010265358893342], [1556442549822, 13.332516703702435], [1556442549836, 22.65988783363769], [1556442549851, 23.039373265373456], [1556442549864, 30.85454384077422], [1556442549878, 25.043881660855874], [1556442549895, 26.88909204077821], [1556442549915, 34.09003993493528], [1556442549930, 33.28865695689633], [1556442549945, 35.89223563123063], [1556442549961, 41.74328438584665], [1556442549979, 47.92001705893858], [1556442549996, 40.5074972072431], [1556442550012, 32.06310509013564], [1556442550027, 24.552904761331824], [1556442550042, 22.139335496478537], [1556442550058, 12.777278905904012], [1556442550073, 20.09776253776095], [1556442550091, 24.858315322460534], [1556442550106, 33.91422122702721], [1556442550127, 35.28422236737857], [1556442550142, 36.096688094331526], [1556442550159, 37.360114161543535], [1556442550176, 40.43539716825532], [1556442550192, 45.4818413881356], [1556442550208, 50.3620437421058], [1556442550223, 47.31624207831308], [1556442550239, 42.48677615563114], [1556442550256, 37.433457862172254], [1556442550274, 28.696311258768525], [1556442550291, 19.35505465899576], [1556442550306, 22.588718050647337], [1556442550323, 14.781681185875875], [1556442550339, 24.61496593607636], [1556442550355, 23.192881605152174], [1556442550389, 31.23411736647064], [1556442550405, 30.723526127494736], [1556442550424, 37.788604797567096], [1556442550440, 40.71075964976943], [1556442550456, 48.9092832959527], [1556442550473, 46.80393959815393], [1556442550489, 48.389306642405984], [1556442550505, 48.2161712936374], [1556442550525, 49.17061448523982], [1556442550542, 55.93975134273151], [1556442550559, 49.014007694811625], [1556442550576, 41.13157847647688], [1556442550592, 33.64931444943893], [1556442550608, 31.335502600642826], [1556442550626, 21.422936884684745], [1556442550642, 14.93335789888421], [1556442550659, 20.7792617082439], [1556442550674, 11.496533177893312], [1556442550691, 7.9682119138290375], [1556442550707, 14.624037067302528], [1556442550723, 7.963046947770422], [1556442550738, 8.2360947998251], [1556442550754, 8.463341580139428], [1556442550771, 1.9783638056615267], [1556442550786, -1.5042265937525983], [1556442550805, -4.765227730308895], [1556442550821, -3.721874624655592], [1556442550837, -5.3067599740969955], [1556442550853, -1.991286767602947], [1556442550869, 4.232612006263569], [1556442550886, 13.726898163453292], [1556442550902, 7.3942757813732385], [1556442550920, -1.417332031923788], [1556442550939, -2.4197926357129838], [1556442550956, -7.836424887432335], [1556442550974, -2.1553855315956536], [1556442550994, -4.8026657059792885], [1556442551011, -3.904954976687126], [1556442551027, -8.892038073067194], [1556442551044, -8.095199210523315], [1556442551061, -10.823801592795478], [1556442551078, -16.140780826373046], [1556442551095, -15.79597401711532], [1556442551111, -16.3696457477131], [1556442551129, -7.586471413433635], [1556442551145, -11.663566429383954], [1556442551162, -4.588228416076033], [1556442551188, -3.3193066457823015], [1556442551207, -3.032716599242052], [1556442551223, -9.787380301570245], [1556442551239, -19.2788863736278], [1556442551256, -15.191903429678135], [1556442551273, -10.486975294560331], [1556442551289, -14.24838009250991], [1556442551306, -21.417536738011663], [1556442551323, -30.671243295999524], [1556442551339, -37.93185518511527], [1556442551356, -37.06832236995575], [1556442551372, -42.874442586404214], [1556442551390, -41.468691482507296], [1556442551406, -48.175054583116776], [1556442551424, -45.58428777555849], [1556442551597, -42.296277197138224], [1556442551615, -38.19749607165235], [1556442551633, -45.65539404600423], [1556442551674, -51.81800454549342], [1556442551694, -51.46063059476617], [1556442551709, -44.382894425536165], [1556442551725, -34.55914580032646], [1556442551741, -33.21401218571389], [1556442551758, -26.554996317339267], [1556442551774, -31.50685630075751], [1556442551789, -24.922096242479093], [1556442551805, -17.30935985499689], [1556442551861, -18.447720692203774], [1556442551878, -23.088965795089035], [1556442551896, -25.68409192911678], [1556442551912, -31.37421534105892], [1556442551928, -28.825183146310778], [1556442551945, -20.75076959318492], [1556442551963, -27.024550905989102], [1556442551980, -20.303603035741567], [1556442551997, -14.384670713097474], [1556442552014, -9.086871516896966], [1556442552030, -5.837949640259666], [1556442552049, -14.232190057462642], [1556442552066, -23.08728032502657], [1556442552083, -21.768774858058315], [1556442552100, -16.41341838219681], [1556442552117, -15.170194549543844], [1556442552134, -17.78972826299151], [1556442552152, -8.566179318092487], [1556442552170, -14.223081389805884], [1556442552189, -18.08019159988028], [1556442552206, -19.536927500403195], [1556442552223, -22.934415104085495], [1556442552303, -21.714501492791477], [1556442552466, -28.97838938522432], [1556442552487, -37.58234547816775], [1556442552503, -40.811896550171255]]
		}];


		return (
			<div>
				{this.props.children}
				<Button
					color="dark"
					style={{marginLeft: "0.5rem"}}
					onClick={this.toggleLiveData}>
					{this.state.liveButtonText}
				</Button>
				<Button
					color="dark"
					style={{marginLeft: "0.5rem"}}
					onClick={this.toggleFullData}>
					{this.state.fullButtonText}
				</Button>
				<Button
					className="remove-btn, float-right"
					color="danger"
					onClick={this.props.onDelete()}
					style={{marginLeft: "0.5rem"}}>
					&times;
				</Button>
				<Collapse
					className="breath-modal"
					isOpen={this.state.isLiveDataOpen}
					style={{marginTop: "3rem", maxHeight: "60%"}}>
					<LiveGraph id={this.props.user._id}/>
				</Collapse>
				<Collapse
					className="breath-modal"
					isOpen={this.state.isFullDataOpen}
					style={{marginTop: "3rem", maxHeight: "60%"}}>
					<Graph data={userData}/>
				</Collapse>
			</div>
		);
	}
}

UserListItem
	.propTypes = {
	user: PropTypes.object.isRequired,
	onDelete: PropTypes.func.isRequired
};

export default UserListItem;